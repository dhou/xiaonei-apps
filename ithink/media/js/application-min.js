function hideError(){$("#errors_msg").html("").fadeOut();}function showError(A){$("#errors_msg").html(A).fadeIn();}function showErrorDlg(B,A){var C=A.pageY-100>0?A.pageY-100:0;Boxy.ask("<div class='errors'>"+B+"</div>",["知道了"],function(D){},{title:"发生错误",x:A.pageX,y:C,closeable:true,closeText:"[关闭]"});}function showInfoDlg(B,A){var C=A.pageY-100>0?A.pageY-100:0;Boxy.ask("<div class='info'>"+B+"</div>",["知道了"],function(D){},{title:"信息提示",x:A.pageX,y:C,closeable:true,closeText:"[关闭]"});}function showInfo(A){$("#info_msg").html(A).fadeIn();}function hideInfo(){$("#info_msg").html("").fadeOut();}$(function(){$(".input-text").mouseover(function A(B){B.target.focus();});});jQuery.fn.boxy=function(A){A=jQuery.extend({single:true},A||{});return this.each(function(){var C=this.nodeName.toLowerCase(),B=this;if(C=="a"){jQuery(this).click(function(){var E=this,D=this.getAttribute("href"),F=jQuery.extend({title:this.title},A);var H=function(I){if(Boxy.cache[D]){I(Boxy.cache[D].clone());}else{if(D.indexOf("#")>=0){D=D.substr(D.indexOf("#"));Boxy.cache[D]=jQuery(D).remove();I(Boxy.cache[D].clone());}else{jQuery.ajax({url:E.href,method:A.method||"GET",dataType:"html",data:{__math__:Math.random()},success:function(J){J=jQuery(J);if(A.cache){Boxy.cache[D]=J;J=J.clone();}I(J);}});}}};var G;if(A.single&&(G=jQuery.data(this,"active.boxy"))){H(function(I){G.setContent(I).show();G._setupBehaviours();if(A.center){G.center();}});}else{H(function(I){jQuery.data(E,"active.boxy",new Boxy(I,F));});}return false;});}else{if(C=="form"){jQuery(this).bind("submit.boxy",function(){Boxy.ask(A.message||"Please confirm:",["OK","Cancel"],function(D){if(D=="OK"){jQuery(B).unbind("submit.boxy").submit();}},{modal:true,closeable:false});return false;});}}});};function Boxy(B,A){this.boxy=jQuery(this.WRAPPER);jQuery.data(this.boxy[0],"boxy",this);this.visible=false;this.options=jQuery.extend({title:null,closeable:true,draggable:true,clone:false,center:true,show:true,modal:false,fixed:true,closeText:"[close]"},A||{});if(this.options.modal){this.options=jQuery.extend(this.options,{center:true,draggable:false});}this.setContent(B||"<div></div>");this._setupTitleBar();this._setupBehaviours();this.boxy.css("display","none").appendTo(document.body);this.toTop();if(this.options.fixed){if(jQuery.browser.msie&&jQuery.browser.version<7){this.options.fixed=false;}else{this.boxy.addClass("fixed");}}if(this.options.center&&typeof this.options.x=="undefined"&&typeof this.options.y=="undefined"){this.center();}else{this.moveTo(typeof this.options.x!="undefined"?this.options.x:Boxy.DEFAULT_X,typeof this.options.y!="undefined"?this.options.y:Boxy.DEFAULT_Y);}if(this.options.show){this.show();}}jQuery.extend(Boxy,{DEFAULT_X:50,DEFAULT_Y:50,cache:{},zIndex:1337,dragConfigured:false,dragging:null,get:function(A){var B=jQuery(A).parents(".boxy-wrapper");return B.length?jQuery.data(B[0],"boxy"):null;},ask:function(C,F,I,J){J=jQuery.extend({modal:true,closeable:false},J,{show:true});var E=jQuery("<div></div>").append(jQuery('<div class="question"></div>').html(C));var A={},H=[];if(F instanceof Array){for(var D=0;D<F.length;D++){A[F[D]]=F[D];H.push(F[D]);}}else{for(var B in F){A[F[B]]=B;H.push(F[B]);}}var G=jQuery('<form class="answers"></form>');G.html(jQuery.map(H,function(K){return"<input type='button' value='"+K+"' />";}).join(" "));jQuery("input[type=button]",G).click(function(){var K=this;Boxy.get(this).hide(function(){if(I){I(A[K.value]);}});});E.append(G);new Boxy(E,J);},_handleDrag:function(A){var B;if(B=Boxy.dragging){B[0].boxy.css({left:A.pageX-B[1],top:A.pageY-B[2]});}},_nextZ:function(){return Boxy.zIndex++;}});Boxy.prototype={WRAPPER:"<table cellspacing='0' cellpadding='0' border='0' class='boxy-wrapper'><tr><td class='top-left'></td><td class='top'></td><td class='top-right'></td></tr><tr><td class='left'></td><td class='boxy-inner'></td><td class='right'></td></tr><tr><td class='bottom-left'></td><td class='bottom'></td><td class='bottom-right'></td></tr></table>",estimateSize:function(){this.boxy.css({visibility:"hidden",display:"block"});var A=this.getSize();this.boxy.css("display","none").css("visibility","visible");return A;},getSize:function(){return[this.boxy.width(),this.boxy.height()];},getContentSize:function(){var A=this.getContent();return[A.width(),A.height()];},getPosition:function(){var A=this.boxy[0];return[A.offsetLeft,A.offsetTop];},getCenter:function(){var B=this.getPosition();var A=this.getSize();return[Math.floor(B[0]+A[0]/2),Math.floor(B[1]+A[1]/2)];},getInner:function(){return jQuery(".boxy-inner",this.boxy);},getContent:function(){return jQuery(".boxy-content",this.boxy);},setContent:function(A){A=jQuery(A).css({display:"block"}).addClass("boxy-content");if(this.options.clone){A=A.clone();}var B=this.getContent();if(B.length){B.replaceWith(A);}else{this.getInner().append(A);}return this;},moveTo:function(A,B){this.moveToX(A).moveToY(B);return this;},moveToX:function(A){if(typeof A=="number"){this.boxy.css({left:A});}else{this.centerX();}return this;},moveToY:function(A){if(typeof A=="number"){this.boxy.css({top:A});}else{this.centerY();}return this;},centerAt:function(A,C){var B=this[this.visible?"getSize":"estimateSize"]();if(typeof A=="number"){this.moveToX(A-B[0]/2);}if(typeof C=="number"){this.moveToY(C-B[1]/2);}return this;},centerAtX:function(A){return this.centerAt(A,null);},centerAtY:function(A){return this.centerAt(null,A);},center:function(B){if(this.options.fixed){var C=[0,0];}else{var C=jQuery.browser.msie?[document.documentElement.scrollLeft,document.documentElement.scrollTop]:[window.pageXOffset,window.pageYOffset];}var A=[jQuery(window).width(),jQuery(window).height()];if(!B||B=="x"){this.centerAt(C[0]+A[0]/2,null);}if(!B||B=="y"){this.centerAt(null,C[1]+A[1]/2);}return this;},centerX:function(){return this.center("x");},centerY:function(){return this.center("y");},resize:function(B,A,D){if(!this.visible){return ;}var C=this._getBoundsForResize(B,A);this.boxy.css({left:C[0],top:C[1]});this.getContent().css({width:C[2],height:C[3]});if(D){D(this);}return this;},tween:function(C,A,E){if(!this.visible){return ;}var D=this._getBoundsForResize(C,A);var B=this;this.boxy.stop().animate({left:D[0],top:D[1]});this.getContent().stop().animate({width:D[2],height:D[3]},function(){if(E){E(B);}});return this;},isVisible:function(){return this.visible;},show:function(){if(this.visible){return ;}if(this.options.modal){var A=this;jQuery('<div class="boxy-modal-blackout"></div>').css({zIndex:Boxy._nextZ(),width:jQuery(document).width(),height:jQuery(document).height()}).appendTo(document.body);this.toTop();if(this.options.closeable){$(document.body).bind("keypress.boxy",function(B){var C=B.which||B.keyCode;if(C==27){A.hide();$(document.body).unbind("keypress.boxy");}});}}this.boxy.stop().css({opacity:1}).show();this.visible=true;return this;},hide:function(B){if(!this.visible){return ;}var A=this;if(this.options.modal){$(document.body).unbind("keypress.boxy");jQuery(".boxy-modal-blackout").animate({opacity:0},function(){jQuery(this).remove();});}this.boxy.stop().animate({opacity:0},300,function(){A.boxy.css({display:"none"});A.visible=false;if(B){B(A);}});return this;},toTop:function(){this.boxy.css({zIndex:Boxy._nextZ()});return this;},getTitle:function(){return $("> .title-bar h2",this.getInner()).html();},setTitle:function(A){$("> .title-bar h2",this.getInner()).html(A);return this;},_getBoundsForResize:function(C,A){var B=this.getContentSize();var E=[C-B[0],A-B[1]];var D=this.getPosition();return[Math.max(D[0]-E[0]/2,0),Math.max(D[1]-E[1]/2,0),C,A];},_setupTitleBar:function(){if(this.options.title){var B=this;var A=jQuery("<div class='title-bar'></div>").html("<h2>"+this.options.title+"</h2>");if(this.options.closeable){A.append(jQuery("<a href='#' class='close'></a>").html(this.options.closeText));}if(this.options.draggable){A[0].onselectstart=function(){return false;};A[0].unselectable="on";A[0].style.MozUserSelect="none";if(!Boxy.dragConfigured){jQuery(document).mousemove(Boxy._handleDrag);Boxy.dragConfigured=true;}A.mousedown(function(C){B.toTop();Boxy.dragging=[B,C.pageX-B.boxy[0].offsetLeft,C.pageY-B.boxy[0].offsetTop];jQuery(this).addClass("dragging");});A.mouseup(function(){jQuery(this).removeClass("dragging");Boxy.dragging=null;});}this.getInner().prepend(A);}},_setupBehaviours:function(){var A=this;jQuery(".close",this.boxy).click(function(){A.hide();return false;}).mousedown(function(B){B.stopPropagation();});}};(function(C){C.timeago=function(G){if(G instanceof Date){return A(G);}else{if(typeof G=="string"){return A(C.timeago.parse(G));}else{return A(C.timeago.parse(C(G).attr("title")));}}};var F=C.timeago;C.extend(C.timeago,{settings:{refreshMillis:60000,allowFuture:false,strings:{ago:"前",fromNow:"从现在起",seconds:"不到1分钟",minute:"大约1分钟",minutes:"%d分钟",hour:"大约一小时",hours:"大约%d小时",day:"一天",days:"%d天",month:"大约一个月",months:"%d个月",year:"大约一年",years:"%d年"}},inWords:function(J){var K=this.settings.strings;var O=K.ago;if(this.settings.allowFuture){if(J<0){O=K.fromNow;}J=Math.abs(J);}var M=J/1000;var G=M/60;var L=G/60;var N=L/24;var H=N/365;var I=M<45&&D(K.seconds,Math.round(M))||M<90&&K.minute||G<45&&D(K.minutes,Math.round(G))||G<90&&K.hour||L<24&&D(K.hours,Math.round(L))||L<48&&K.day||N<30&&D(K.days,Math.floor(N))||N<60&&K.month||N<365&&D(K.months,Math.floor(N/30))||H<2&&K.year||D(K.years,Math.floor(H));return I+O;},parse:function(H){var G=C.trim(H);G=G.replace(/-/,"/").replace(/-/,"/");G=G.replace(/T/," ").replace(/Z/," UTC");G=G.replace(/([\+-]\d\d)\:?(\d\d)/," $1$2");return new Date(G);}});C.fn.timeago=function(){var H=this;H.each(B);var G=F.settings;if(G.refreshMillis>0){setInterval(function(){H.each(B);},G.refreshMillis);}return H;};function B(){var G=F.parse(this.title);if(!isNaN(G)){C(this).text(A(G));}return this;}function A(G){return F.inWords(E(G));}function E(G){return(new Date().getTime()-G.getTime());}function D(G,H){return G.replace(/%d/i,H);}if(C.browser.msie&&C.browser.version<7){document.createElement("abbr");}})(jQuery);jQuery.easing.jswing=jQuery.easing.swing;jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(B,C,A,E,D){return jQuery.easing[jQuery.easing.def](B,C,A,E,D);},easeInQuad:function(B,C,A,E,D){return E*(C/=D)*C+A;},easeOutQuad:function(B,C,A,E,D){return -E*(C/=D)*(C-2)+A;},easeInOutQuad:function(B,C,A,E,D){if((C/=D/2)<1){return E/2*C*C+A;}return -E/2*((--C)*(C-2)-1)+A;},easeInCubic:function(B,C,A,E,D){return E*(C/=D)*C*C+A;},easeOutCubic:function(B,C,A,E,D){return E*((C=C/D-1)*C*C+1)+A;},easeInOutCubic:function(B,C,A,E,D){if((C/=D/2)<1){return E/2*C*C*C+A;}return E/2*((C-=2)*C*C+2)+A;},easeInQuart:function(B,C,A,E,D){return E*(C/=D)*C*C*C+A;},easeOutQuart:function(B,C,A,E,D){return -E*((C=C/D-1)*C*C*C-1)+A;},easeInOutQuart:function(B,C,A,E,D){if((C/=D/2)<1){return E/2*C*C*C*C+A;}return -E/2*((C-=2)*C*C*C-2)+A;},easeInQuint:function(B,C,A,E,D){return E*(C/=D)*C*C*C*C+A;},easeOutQuint:function(B,C,A,E,D){return E*((C=C/D-1)*C*C*C*C+1)+A;},easeInOutQuint:function(B,C,A,E,D){if((C/=D/2)<1){return E/2*C*C*C*C*C+A;}return E/2*((C-=2)*C*C*C*C+2)+A;},easeInSine:function(B,C,A,E,D){return -E*Math.cos(C/D*(Math.PI/2))+E+A;},easeOutSine:function(B,C,A,E,D){return E*Math.sin(C/D*(Math.PI/2))+A;},easeInOutSine:function(B,C,A,E,D){return -E/2*(Math.cos(Math.PI*C/D)-1)+A;},easeInExpo:function(B,C,A,E,D){return(C==0)?A:E*Math.pow(2,10*(C/D-1))+A;},easeOutExpo:function(B,C,A,E,D){return(C==D)?A+E:E*(-Math.pow(2,-10*C/D)+1)+A;},easeInOutExpo:function(B,C,A,E,D){if(C==0){return A;}if(C==D){return A+E;}if((C/=D/2)<1){return E/2*Math.pow(2,10*(C-1))+A;}return E/2*(-Math.pow(2,-10*--C)+2)+A;},easeInCirc:function(B,C,A,E,D){return -E*(Math.sqrt(1-(C/=D)*C)-1)+A;},easeOutCirc:function(B,C,A,E,D){return E*Math.sqrt(1-(C=C/D-1)*C)+A;},easeInOutCirc:function(B,C,A,E,D){if((C/=D/2)<1){return -E/2*(Math.sqrt(1-C*C)-1)+A;}return E/2*(Math.sqrt(1-(C-=2)*C)+1)+A;},easeInElastic:function(B,D,A,H,G){var E=1.70158;var F=0;var C=H;if(D==0){return A;}if((D/=G)==1){return A+H;}if(!F){F=G*0.3;}if(C<Math.abs(H)){C=H;var E=F/4;}else{var E=F/(2*Math.PI)*Math.asin(H/C);}return -(C*Math.pow(2,10*(D-=1))*Math.sin((D*G-E)*(2*Math.PI)/F))+A;},easeOutElastic:function(B,D,A,H,G){var E=1.70158;var F=0;var C=H;if(D==0){return A;}if((D/=G)==1){return A+H;}if(!F){F=G*0.3;}if(C<Math.abs(H)){C=H;var E=F/4;}else{var E=F/(2*Math.PI)*Math.asin(H/C);}return C*Math.pow(2,-10*D)*Math.sin((D*G-E)*(2*Math.PI)/F)+H+A;},easeInOutElastic:function(B,D,A,H,G){var E=1.70158;var F=0;var C=H;if(D==0){return A;}if((D/=G/2)==2){return A+H;}if(!F){F=G*(0.3*1.5);}if(C<Math.abs(H)){C=H;var E=F/4;}else{var E=F/(2*Math.PI)*Math.asin(H/C);}if(D<1){return -0.5*(C*Math.pow(2,10*(D-=1))*Math.sin((D*G-E)*(2*Math.PI)/F))+A;}return C*Math.pow(2,-10*(D-=1))*Math.sin((D*G-E)*(2*Math.PI)/F)*0.5+H+A;},easeInBack:function(B,C,A,F,E,D){if(D==undefined){D=1.70158;}return F*(C/=E)*C*((D+1)*C-D)+A;},easeOutBack:function(B,C,A,F,E,D){if(D==undefined){D=1.70158;}return F*((C=C/E-1)*C*((D+1)*C+D)+1)+A;},easeInOutBack:function(B,C,A,F,E,D){if(D==undefined){D=1.70158;}if((C/=E/2)<1){return F/2*(C*C*(((D*=(1.525))+1)*C-D))+A;}return F/2*((C-=2)*C*(((D*=(1.525))+1)*C+D)+2)+A;},easeInBounce:function(B,C,A,E,D){return E-jQuery.easing.easeOutBounce(B,D-C,0,E,D)+A;},easeOutBounce:function(B,C,A,E,D){if((C/=D)<(1/2.75)){return E*(7.5625*C*C)+A;}else{if(C<(2/2.75)){return E*(7.5625*(C-=(1.5/2.75))*C+0.75)+A;}else{if(C<(2.5/2.75)){return E*(7.5625*(C-=(2.25/2.75))*C+0.9375)+A;}else{return E*(7.5625*(C-=(2.625/2.75))*C+0.984375)+A;}}}},easeInOutBounce:function(B,C,A,E,D){if(C<D/2){return jQuery.easing.easeInBounce(B,C*2,0,E,D)*0.5+A;}return jQuery.easing.easeOutBounce(B,C*2-D,0,E,D)*0.5+E*0.5+A;}});(function(A){A.fn.tipsy=function(B){B=A.extend({fade:false,gravity:"n"},B||{});var C=null,D=false;this.hover(function(){A.data(this,"cancel.tipsy",true);var E=A.data(this,"active.tipsy");if(!E){E=A('<div class="tipsy"><div class="tipsy-inner">'+A(this).attr("title")+"</div></div>");E.css({position:"absolute",zIndex:100000});A(this).attr("title","");A.data(this,"active.tipsy",E);}var H=A.extend({},A(this).offset(),{width:this.offsetWidth,height:this.offsetHeight});E.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).appendTo(document.body);var F=E[0].offsetWidth,G=E[0].offsetHeight;switch(B.gravity.charAt(0)){case"n":E.css({top:H.top+H.height,left:H.left+H.width/2-F/2}).addClass("tipsy-north");break;case"s":E.css({top:H.top-G,left:H.left+H.width/2-F/2}).addClass("tipsy-south");break;case"e":E.css({top:H.top+H.height/2-G/2,left:H.left-F}).addClass("tipsy-east");break;case"w":E.css({top:H.top+H.height/2-G/2,left:H.left+H.width}).addClass("tipsy-west");break;}if(B.fade){E.css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:1});}else{E.css({visibility:"visible"});}},function(){A.data(this,"cancel.tipsy",false);var E=this;setTimeout(function(){if(A.data(this,"cancel.tipsy")){return ;}var F=A.data(E,"active.tipsy");if(B.fade){F.stop().fadeOut(function(){A(this).remove();});}else{F.remove();}},100);});};})(jQuery);(function(D){D.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","outlineColor"],function(F,E){D.fx.step[E]=function(G){if(G.state==0){G.start=C(G.elem,E);G.end=B(G.end);}G.elem.style[E]="rgb("+[Math.max(Math.min(parseInt((G.pos*(G.end[0]-G.start[0]))+G.start[0]),255),0),Math.max(Math.min(parseInt((G.pos*(G.end[1]-G.start[1]))+G.start[1]),255),0),Math.max(Math.min(parseInt((G.pos*(G.end[2]-G.start[2]))+G.start[2]),255),0)].join(",")+")";};});function B(F){var E;if(F&&F.constructor==Array&&F.length==3){return F;}if(E=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(F)){return[parseInt(E[1]),parseInt(E[2]),parseInt(E[3])];}if(E=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(F)){return[parseFloat(E[1])*2.55,parseFloat(E[2])*2.55,parseFloat(E[3])*2.55];}if(E=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(F)){return[parseInt(E[1],16),parseInt(E[2],16),parseInt(E[3],16)];}if(E=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(F)){return[parseInt(E[1]+E[1],16),parseInt(E[2]+E[2],16),parseInt(E[3]+E[3],16)];}return A[D.trim(F).toLowerCase()];}function C(G,E){var F;do{F=D.curCSS(G,E);if(F!=""&&F!="transparent"||D.nodeName(G,"body")){break;}E="backgroundColor";}while(G=G.parentNode);return B(F);}var A={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]};})(jQuery);(function(A){A.fn.highlight=function(){this.animate({backgroundColor:"cyan"},1000,"easeInQuad").animate({backgroundColor:"white"},1000,"easeOutQuad");};})(jQuery);